{
  "name": "BIM Gateway Login and Create Project",
  "description": "Login and create project with random values",
  "failurePolicy": {
    "onTimeout": "STOP_AND_FAIL",
    "onSelectorNotFound": "STOP_AND_FAIL",
    "onNetworkError": "STOP_AND_FAIL"
  },
  "preconditions": {
    "generateRandomValues": true,
    "randomValues": {
      "RANDOM_PROJECT_REF": "PRJ-{randomNum}",
      "RANDOM_PROJECT_NAME": "Auto Project {randomWord}",
      "RANDOM_ORG_NAME": "Org {randomWord}",
      "RANDOM_UNIQUE_CODE": "CODE-{randomNum}",
      "RANDOM_DOMAIN": "auto{randomStr}.com"
    }
  },
  "steps": [
    {
  "action": "open_page",
  "arguments": {
    "url": "https://bimgatewayservice-nitro.qe.bp-paas.otxlab.net/subscriptions/july1/home",
    "waitUntil": "domcontentloaded",
    "timeout": 60000
  },
  "description": "Open BIM Gateway home page"
},

    {
      "action": "wait_for_selector",
      "arguments": {
        "selector": "#otds_username",
        "timeout": 60000
      }
    },
    {
      "action": "fill",
      "arguments": {
        "selector": "#otds_username",
        "text": "rsil@opentext.com"
      }
    },
    {
      "action": "click",
      "arguments": {
        "selector": "#nextbutton"
      }
    },

    {
      "action": "wait_for_selector",
      "arguments": {
        "selector": "#otds_password",
        "timeout": 60000
      }
    },
    {
      "action": "fill",
      "arguments": {
        "selector": "#otds_password",
        "text": "Infinity@12345"
      }
    },
    {
      "action": "click",
      "arguments": {
        "selector": "#loginbutton"
      }
    },

    {
      "action": "wait_for_selector",
      "arguments": {
        "selector": "#add-project",
        "timeout": 60000
      }
    },
    {
      "action": "click",
      "arguments": {
        "selector": "#add-project"
      }
    },
    {
      "action": "wait_for_selector",
      "arguments": {
        "selector": "#projectCode",
        "state": "visible",
        "timeout": 30000
      }
    },
    {
      "action": "focus",
      "arguments": {
        "selector": "#projectCode"
      }
    },
    {
      "action": "type",
      "arguments": {
        "selector": "#projectCode",
        "text": "{RANDOM_PROJECT_REF}",
        "delay": 40
      }
    },

    {
      "action": "wait_for_selector",
      "arguments": {
        "selector": "input[placeholder*='project name']",
        "state": "visible",
        "timeout": 60000
      }
    },
    {
      "action": "type",
      "arguments": {
        "selector": "input[placeholder*='project name']",
        "text": "{RANDOM_PROJECT_NAME}",
        "delay": 40
      }
    },

    {
      "action": "click",
      "arguments": {
        "selector": "#contractNext"
      }
    },

    {
      "action": "wait_for_network",
      "arguments": {
        "url": "projectOptions.json",
        "timeout": 60000
      }
    },

    {
      "action": "wait_for_selector",
      "arguments": {
        "selector": "input[type='radio'][id='allow']",
        "state": "visible",
        "timeout": 60000
      }
    },
    {
      "action": "click",
      "arguments": {
        "selector": "input[type='radio'][id='allow']"
      }
    },

    {
      "action": "click",
      "arguments": {
        "selector": "#contractNext"
      }
    },

    {
      "action": "wait_for_network",
      "arguments": {
        "url": "organizationDetails.json",
        "timeout": 60000
      }
    },

    {
      "action": "type",
      "arguments": {
        "selector": "input[placeholder='Enter name']",
        "text": "{RANDOM_ORG_NAME}",
        "delay": 40
      }
    },
    {
      "action": "type",
      "arguments": {
        "selector": "input[placeholder='Enter an unique code']",
        "text": "{RANDOM_UNIQUE_CODE}",
        "delay": 40
      }
    },
    {
      "action": "type",
      "arguments": {
        "selector": "input[placeholder='Enter domain']",
        "text": "{RANDOM_DOMAIN}",
        "delay": 40
      }
    },

    {
      "action": "wait_for_enabled",
      "arguments": {
        "selector": ".dropdown-toggle",
        "timeout": 60000
      }
    },
    {
      "action": "click",
      "arguments": {
        "selector": ".dropdown-toggle"
      }
    },
    {
      "action": "click",
      "arguments": {
        "selector": ".dropdown-item:has-text('Owner')"
      }
    },

    {
      "action": "click",
      "arguments": {
        "selector": "#contractAdd"
      }
    },

    {
      "action": "screenshot",
      "arguments": {}
    }
  ]
}
